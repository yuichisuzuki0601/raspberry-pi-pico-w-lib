<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
        <link rel="stylesheet" href="style.css" />
        <script src="../common/common.js"></script>
        <title>Wifi Setup</title>
    </head>
    <body>
        <h2>Wifi Setup</h2>
        <div class="line">
            <div class="label">Wifi SSID</div>
            <input id="wifi-ssid" placeholder="WIFI SSID" value="{wifiSsid}" />
        </div>
        <div class="line">
            <div class="label">Wifi Password</div>
            <input id="wifi-password" placeholder="WIFI Password" value="{wifiPassword}" />
        </div>
        <div class="space-50"></div>
        <div class="line">
            <button id="clear">Clear</button>
        </div>
        <div class="line">
            <button id="save" disabled>Save</button>
        </div>
    </body>
    <script>
        const getWifiSsid = () => getValue("#wifi-ssid");
        const getWifiPassword = () => getValue("#wifi-password");

        const toggleSaveButton = () => {
            $("#save").disabled = !getWifiSsid() || !getWifiPassword();
        };

        toggleSaveButton();

        $("#wifi-ssid").addEventListener("input", e => toggleSaveButton());
        $("#wifi-password").addEventListener("input", e => toggleSaveButton());

        $("#clear").addEventListener("click", e => {
            setValue("#wifi-ssid", "");
            setValue("#wifi-password", "");
            toggleSaveButton();
        });

        $("#save").addEventListener("click", e => {
            location.href = `save?wifi-ssid=${getWifiSsid()}&wifi-password=${getWifiPassword()}`;
        });
    </script>
</html>
